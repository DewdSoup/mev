# RPC
HELIUS_API_KEY=2bb675f2-573f-4561-b57f-d351db310e5a
RPC_URL=https://mainnet.helius-rpc.com/?api-key=2bb675f2-573f-4561-b57f-d351db310e5a
RPC_PRIMARY=https://mainnet.helius-rpc.com/?api-key=2bb675f2-573f-4561-b57f-d351db310e5a
RPC_WSS_URL=wss://mainnet.helius-rpc.com/?api-key=2bb675f2-573f-4561-b57f-d351db310e5a
PHOENIX_WSS_URL=wss://mainnet.helius-rpc.com/?api-key=2bb675f2-573f-4561-b57f-d351db310e5a
WS_URL=wss://mainnet.helius-rpc.com/?api-key=2bb675f2-573f-4561-b57f-d351db310e5a
WSS_URL=wss://mainnet.helius-rpc.com/?api-key=2bb675f2-573f-4561-b57f-d351db310e5a

# Lock env so config.ts doesn't reload other files after this one
__ENV_LIVE_LOCKED=1

# Wallet
WALLET_KEYPAIR_PATH=/home/dudesoup/code/mev/wallets/blondi.json
WALLET_PUBKEY=5wqHjxk5VhRTUc9Gavgtan3MN5k31ETjDvnU7x4MPRHr
USDC_ATA=FEcYTKzvgkNDD2VG9SdcvNH1bWYZ2Ggn59XES5y2nAc6
WSOL_ATA=GkvWNym7ctZ3Q6fnB4VuqRV2LDeViygqbtzKRU9Pi4yj
USDC_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
WSOL_MINT=So11111111111111111111111111111111111111112

# Markets
RAYDIUM_POOL_ID=58oQChx4yWmvKdwLLZzBi4ChoCc2fqCUWBkwMihLYQo2
PHOENIX_MARKET=4DoNfFBfF7UokCC2FQzriy7yHK6DY6NVdYpuekQ5pRgg
RAYDIUM_POOL_JSON_PATH=/home/dudesoup/code/mev/configs/raydium.pool.json
AMMS_RAYDIUM_USE_API_BOOTSTRAP=false
RAYDIUM_POOL_KEYS_JSON=/home/dudesoup/code/mev/configs/raydium.pool.json
PAIRS_JSON=/home/dudesoup/code/mev/configs/pairs.json

# Mode
SHADOW_TRADING=0
LIVE_TRADING=1
USE_RPC_SIM=1
USE_RAYDIUM_SWAP_SIM=0
ATOMIC_MODE=single_tx
ENABLE_EMBEDDED_PUBLISHERS=0
RUN_FOR_MINUTES=
TX_CONFIRM_LEVEL=confirmed

# Publishers (single-proc)
EDGE_AMMS_JSONL=/home/dudesoup/code/mev/data/logs/amms/runtime.jsonl
EDGE_PHOENIX_JSONL=/home/dudesoup/code/mev/data/logs/phoenix/runtime.jsonl

# Decision / sizing
TRADE_THRESHOLD_BPS=0.3
MAX_SLIPPAGE_BPS=3
PHOENIX_SLIPPAGE_BPS=3
SLIPPAGE_MODE=adaptive
TRADE_SIZE_BASE=0.02
LIVE_SIZE_BASE=0.03
ALLOW_SYNTH_TRADES=false
SIZEOPT_ABS_MAX_BASE=0.048
DECISION_MIN_BASE=0.03

BOOK_TTL_MS=1500
DECISION_DEDUPE_MS=500
DECISION_BUCKET_MS=150
DECISION_MIN_EDGE_DELTA_BPS=0.05
EDGE_FOLLOW_POLL_MS=750
EDGE_MIN_ABS_BPS=0.05
PNL_SAFETY_BPS=.5

# Sims / size-opt
USE_POOL_IMPACT_SIM=true
CPMM_MAX_POOL_TRADE_FRAC=0.02
DYNAMIC_SLIPPAGE_EXTRA_BPS=0.25
SIZEOPT_MAX_POOL_FRAC=0.02
SIZEOPT_PROBE_STEPS=12

# Fees
PHOENIX_TAKER_FEE_BPS=2
AMM_TAKER_FEE_BPS=25
RAYDIUM_TRADE_FEE_BPS=25
ORCA_TRADE_FEE_BPS=30

EV_AMM_FEE_INCLUDED_IN_EFF_PX=1
RAYDIUM_ASSERT_FEE=0
RAYDIUM_MINOUT_BUFFER_BPS=3
PHOENIX_DEPTH_ENABLED=1
PHOENIX_L2_DEPTH=3
PHOENIX_TICK_MS=1500
PHOENIX_WS_ENABLED=1

# Costs / submit / tips
FIXED_TX_COST_QUOTE=0.0006
AMM_MINOUT_BASE_BPS=2
SUBMIT_MODE=rpc
SUBMIT_CU_LIMIT=800000
TIP_MODE=cu_price
TIP_MICROLAMPORTS_PER_CU=100
TIP_MULTIPLIER=1.5
TIP_MAX_LAMPORTS=3000000
SUBMIT_TIP_LAMPORTS=0

# Logging
LOG_SIM_FIELDS=1
LOG_RAYDIUM_MINOUT=1
LOG_RAYDIUM_TOKEN_CTOR=0
LOG_RAYDIUM_SWAP_BUILD=1
DECISION_LOG_BOTH=1

# Phoenix mid fallback + sane TTL
PYTH_PRICE_ID_SOL_USDC=0xef0d8b6fda2ceba41da15d4095d1da392a0d2f8ed0c6c7bc0f4cfac8c280b56d
RAYDIUM_POOL_BASE_MINT=So11111111111111111111111111111111111111112
RAYDIUM_POOL_QUOTE_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v

# AMM publisher (if split-process)
AMMS_TICK_MS=1500

# =========================
# === PROOF MODE SWITCH ===
PROOF_FORCE_ONCE=0
PROOF_PATH=
PROOF_SIZE_BASE=0.002
PROOF_BYPASS_EV=0
# =========================
# Production validation parameters
PRICE_VALIDATION_MAX_SPREAD_BPS=200
MIN_PROFITABLE_BPS=5
MAX_REALISTIC_PROFIT_BPS=100
MIN_POOL_LIQUIDITY_SOL=1000
MIN_POOL_LIQUIDITY_USDC=100000
MAX_DAILY_TRADES=50
MAX_DAILY_VOLUME_QUOTE=10000

# Circuit breakers
CIRCUIT_BREAKER_PRICE_CHANGE_BPS=500
PRICE_STALENESS_MS=10000

# Keep these existing settings
ENABLE_AMM_RAYDIUM=1
ENABLE_AMM_ORCA=1

# --- Enable Orca in the AMM publisher ---
AMMS_ENABLE=raydium,raydium_clmm,orca

# Known SOL/USDC pools (Raydium CPMM + Orca Whirlpool)
RAYDIUM_POOL_ID_SOL_USDC=58oQChx4yWmvKdwLLZzBi4ChoCc2fqCUWBkwMihLYQo2
ORCA_POOL_ID=HJPjoWUrhoZzkNfRpHuieeFk9WcZWjwy6PBjZ81ngndJ

# Optional: executor routing hints
# Leave blank to honor the joiner (recommended baseline). Set to "raydium" or "orca" to force.
EXEC_AMM_VENUE=

# AMM<->AMM controls
TRACK_AMM_AMM=1
EXECUTE_AMM_AMM=1

# === CLMM Quoter ===
CLMM_QUOTER_ENABLED=1
CLMM_QUOTER_RPC_URL=https://mainnet.helius-rpc.com/?api-key=2bb675f2-573f-4561-b57f-d351db310e5a
RPC_SIM_TOL_BPS=2

# == New: prevent zero-size to Orca SDK ==
MIN_ORCA_BASE_SIZE=0.000001
# CLMM quoter concurrency/backoff (429 mitigation)
CLMM_CONCURRENCY=2
CLMM_RETRY=4
CLMM_BACKOFF_BASE_MS=300
CLMM_BACKOFF_MAX_MS=4000
AMMS_FEE_SOURCE_AUDIT=1

# Rate-limit aware RPC backoff (raise once you switch to higher-tier infra)
RPC_BACKOFF_MAX_CONCURRENCY=2
RPC_BACKOFF_MAX_RETRIES=5
RPC_BACKOFF_BASE_MS=400
RPC_BACKOFF_MAX_MS=4000

# === New knobs for this patch set ===
RAYDIUM_FEE_TTL_MS=300000
ORCA_QUOTER_EXTRA_BPS=2

# === Staleness guard knobs ===
AMM_SLOT_MAX_LAG=8
AMM_SNAPSHOT_MAX_AGE_MS=2000

# Funding gate (keeps LIVE but won't actually send if not funded)
FUND_MIN_LAMPORTS=20000000         # ~0.02 SOL, change anytime
FUND_MIN_USDC=1000000              # 1 USDC with 6 decimals
SEND_WITHOUT_FUNDS=0               # 0 = never send if below mins

# Router
ROUTER_ALLOW_AMM_PHOENIX=1
ROUTER_ALLOW_PHOENIX_AMM=1
ROUTER_ALLOW_AMM_AMM=1
ROUTER_MAX_HOPS=3                  # enables multi-hop when more pools appear

# Execution
EXEC_JOINER_MODE=single_tx         # atomic multi-leg joiner

# ---- Raydium CLMM builder (safe placeholder) ----
CLMM_REAL_BUILDER=0                # keep 0 until real CLMM ix builder is wired
CLMM_CU_LIMIT=1000000
CLMM_CU_PRICE_MICROLAMPORTS=0

JOINER_CONCURRENT_QUOTES=1
