# ─────────────────────────────
# CORE / RPC / WALLET
# ─────────────────────────────
HELIUS_API_KEY=2bb675f2-573f-4561-b57f-d351db310e5a
RPC_URL=https://rpc.helius.xyz/?api-key=${HELIUS_API_KEY}

# If blondi.json is at repo root:
WALLET_KEYPAIR_PATH=/home/dudesoup/code/mev/blondi.json
# (If you actually keep it in /wallets/, change to /home/dudesoup/code/mev/wallets/blondi.json)

# ─────────────────────────────
# MARKETS (SOL/USDC)
# ─────────────────────────────
RAYDIUM_POOL_ID=58oQChx4yWmvKdwLLZzBi4ChoCc2fqCUWBkwMihLYQo2
PHOENIX_MARKET_ID=4DoNfFBfF7UokCC2FQzriy7yHK6DY6NVdYpuekQ5pRgg

# Raydium pool discovery (explicit file, not API bootstrap)
AMMS_RAYDIUM_USE_API_BOOTSTRAP=false
RAYDIUM_POOL_JSON_PATH=/home/dudesoup/code/mev/configs/raydium.pool.json
RAYDIUM_KEYS_SOURCE=file
RAYDIUM_POOLS_FILE=/home/dudesoup/code/mev/services/arb-mm/config/raydium_pools.mainnet.json

# Adapter toggles
ENABLE_AMM_RAYDIUM=1
# ENABLE_AMM_ORCA=0
# ENABLE_AMM_METEORA=0
# ENABLE_AMM_OPENBOOK=0

# Publisher cadences (explicit so behavior is obvious)
AMMS_TICK_MS=2000
PHOENIX_TICK_MS=2000

# ─────────────────────────────
# MODE / RUN-TYPE (live)
# ─────────────────────────────
SHADOW_TRADING=0
LIVE_TRADING=1
USE_RPC_SIM=0                      # ← disable sim gating (Raydium sim bug)
USE_RAYDIUM_SWAP_SIM=0             # ← keep swap-sim fully off for now

# ─────────────────────────────
# DECISION / SIZING (looser to encourage sends)
# ─────────────────────────────
TRADE_THRESHOLD_BPS=0.05
MAX_SLIPPAGE_BPS=1.5
PHOENIX_SLIPPAGE_BPS=2
SLIPPAGE_MODE=adaptive
TRADE_SIZE_BASE=0.001
LIVE_SIZE_BASE=0.001
ALLOW_SYNTH_TRADES=false

BOOK_TTL_MS=500
DECISION_DEDUPE_MS=1000
DECISION_BUCKET_MS=250
DECISION_MIN_EDGE_DELTA_BPS=0.05
EDGE_FOLLOW_POLL_MS=500
EDGE_MIN_ABS_BPS=0.05

# ─────────────────────────────
# SIMULATORS (used for gating + logs)
# ─────────────────────────────
USE_POOL_IMPACT_SIM=true
CPMM_MAX_POOL_TRADE_FRAC=0.02
DYNAMIC_SLIPPAGE_EXTRA_BPS=0.25

# ─────────────────────────────
# FEES / FIXED COST
# ─────────────────────────────
PHOENIX_TAKER_FEE_BPS=0
AMM_TAKER_FEE_BPS=25
FIXED_TX_COST_QUOTE=0

# ─────────────────────────────
# RISK / GUARDS (loosened for live micro test)
# ─────────────────────────────
GUARD_PER_MIN_NOTIONAL_QUOTE=50
GUARD_PER_VENUE_NOTIONAL_QUOTE=50
GUARD_CONSEC_FAILS_PATH=3
GUARD_ERROR_BURST_MAX=5
GUARD_ERROR_BURST_SECS=15
GUARD_MIN_CHAIN_TPS=50
KILL_SWITCH_START=false

# ─────────────────────────────
# SUBMIT/TIPS
# ─────────────────────────────
SUBMIT_CU_LIMIT=600000
TIP_MODE=cu_price
TIP_MICROLAMPORTS_PER_CU=120
TIP_MULTIPLIER=1.2
TIP_MAX_LAMPORTS=2000000
SUBMIT_TIP_LAMPORTS=0
SUBMIT_MODE=rpc

# ─────────────────────────────
# PREFLIGHT / BALANCES
# ─────────────────────────────
MIN_SOL_BALANCE_LAMPORTS=5000000
# Use your known addresses to avoid auto-discovery:
WALLET_PUBKEY=5wqHjxk5VhRTUc9Gavgtan3MN5k31ETjDvnU7x4MPRHr
USDC_ATA=FEcYTKzvgkNDD2VG9SdcvNH1bWYZ2Ggn59XES5y2nAc6
WSOL_ATA=GkvWNym7ctZ3Q6fnB4VuqRV2LDeViygqbtzKRU9Pi4yj

# ─────────────────────────────
# SESSION LOGGING
# ─────────────────────────────
SESSION_LOGS_ENABLE=true
SESSION_LOGS_DIR=services/arb-mm/data/sessions

# ─────────────────────────────
# LOGGING
# ─────────────────────────────
LOG_SIM_FIELDS=1
LOG_RAYDIUM_MINOUT=1
LOG_RAYDIUM_TOKEN_CTOR=0
LOG_RAYDIUM_SWAP_BUILD=0

# Fee/slippage tuning for minOut (Raydium side)
RAYDIUM_TRADE_FEE_BPS=25
RAYDIUM_MINOUT_BUFFER_BPS=0
# Base slip used by the Raydium minOut calc (bps):
AMM_MINOUT_BASE_BPS=50

# Size optimizer guardrails
SIZEOPT_MAX_POOL_FRAC=0.02
SIZEOPT_MIN_BASE=0.0001
SIZEOPT_PROBE_STEPS=9

# On-chain fee sanity:
# Keep =1 only if you applied the latest raydium.ts patch that reads full pool keys.
# If you haven't patched yet, set this to 0 to avoid the "undefined program id" warning.
RAYDIUM_ASSERT_FEE=0

# ─────────────────────────────
# Optional: prove the pipe once (OFF by default)
# ─────────────────────────────
# Set to e.g. 10 to allow one micro trade when |raw edge| ≥ 10 bps even if EV≈0
TEST_FORCE_SEND_IF_ABS_EDGE_BPS=
TEST_MAX_SENDS=0
